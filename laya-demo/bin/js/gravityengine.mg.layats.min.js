function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function t(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?e(Object(i),!0).forEach((function(e){u(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function n(){n=function(){return e};var e={},t=Object.prototype,i=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,i){var a=t&&t.prototype instanceof f?t:f,s=Object.create(a.prototype),o=new I(i||[]);return r(s,"_invoke",{value:w(e,n,o)}),s}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var p={};function f(){}function d(){}function v(){}var g={};u(g,s,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(O([])));y&&y!==t&&i.call(y,s)&&(g=y);var _=v.prototype=f.prototype=Object.create(g);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;r(this,"_invoke",{value:function(r,a){function s(){return new t((function(n,s){!function n(r,a,s,o){var c=h(e[r],e,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==typeof l&&i.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,s,o)}),(function(e){n("throw",e,s,o)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,o)}))}o(c.arg)}(r,a,n,s)}))}return n=n?n.then(s,s):s()}})}function w(e,t,n){var i="suspendedStart";return function(r,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw a;return{value:void 0,done:!0}}for(n.method=r,n.arg=a;;){var s=n.delegate;if(s){var o=S(s,n);if(o){if(o===p)continue;return o}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var c=h(e,t,n);if("normal"===c.type){if(i=n.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i="completed",n.method="throw",n.arg=c.arg)}}}function S(e,t){var n=t.method,i=e.iterator[n];if(void 0===i)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var r=h(i,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,p;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function O(e){if(e||""===e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}throw new TypeError(typeof e+" is not iterable")}return d.prototype=v,r(_,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:d,configurable:!0}),d.displayName=u(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},k(b.prototype),u(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,i,r,a){void 0===a&&(a=Promise);var s=new b(l(t,n,i,r),a);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},k(_),u(_,c,"Generator"),u(_,s,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},e.values=O,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(N),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,i){return s.type="throw",s.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var o=i.call(a,"catchLoc"),c=i.call(a,"finallyLoc");if(o&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(o){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=e,s.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;N(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t,n,i,r,a,s){try{var o=e[a](s),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(i,r)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var s=e.apply(t,n);function o(e){r(s,i,a,o,c,"next",e)}function c(e){r(s,i,a,o,c,"throw",e)}o(void 0)}))}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,p(i.key),i)}}function c(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t,n){return(t=p(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function h(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}function p(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var f="3.5.4",d="MG",v="laya",g="https://backend.gravity-engine.com/event_center/api/v1",m={},y=Array.prototype,_=Object.prototype,k=y.slice,b=_.toString,w=Object.prototype.hasOwnProperty,S=y.forEach,P=Array.isArray,N={};m.isNumber=function(e){return"number"==typeof e?0==e-e:"string"==typeof e&&""!==e.trim()&&(Number.isFinite?Number.isFinite(+e):isFinite(+e))},m.each=function(e,t,n){if(null==e)return!1;if(S&&e.forEach===S)e.forEach(t,n);else if(e.length===+e.length){for(var i=0,r=e.length;i<r;i++)if(i in e&&t.call(n,e[i],i,e)===N)return!1}else for(var a in e)if(w.call(e,a)&&t.call(n,e[a],a,e)===N)return!1},m.extend=function(e){return m.each(k.call(arguments,1),(function(t){for(var n in t)void 0!==t[n]&&(e[n]=t[n])})),e},m.extend2Layers=function(e){return m.each(k.call(arguments,1),(function(t){for(var n in t)void 0!==t[n]&&(m.isObject(t[n])&&m.isObject(e[n])?m.extend(e[n],t[n]):e[n]=t[n])})),e},m.isArray=P||function(e){return"[object Array]"===b.call(e)},m.isFunction=function(e){try{return"function"==typeof e}catch(e){return!1}},m.isPromise=function(e){return"[object Promise]"===b.call(e)&&null!=e},m.isObject=function(e){return"[object Object]"===b.call(e)&&null!=e},m.isEmptyObject=function(e){if(m.isObject(e)){for(var t in e)if(w.call(e,t))return!1;return!0}return!1},m.isUndefined=function(e){return void 0===e},m.isString=function(e){return"[object String]"===b.call(e)},m.isDate=function(e){return"[object Date]"===b.call(e)},m.isBoolean=function(e){return"[object Boolean]"===b.call(e)},m.isNumber=function(e){return"[object Number]"===b.call(e)&&/[\d\.]+/.test(String(e))},m.isJSONString=function(e){try{JSON.parse(e)}catch(e){return!1}return!0},m.decodeURIComponent=function(e){var t="";try{t=decodeURIComponent(e)}catch(n){t=e}return t},m.encodeURIComponent=function(e){var t="";try{t=encodeURIComponent(e)}catch(n){t=e}return t},m.utf8Encode=function(e){var t,n,i,r,a="";for(t=n=0,i=(e=(e+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,r=0;r<i;r++){var s=e.charCodeAt(r),o=null;s<128?n++:o=s>127&&s<2048?String.fromCharCode(s>>6|192,63&s|128):String.fromCharCode(s>>12|224,s>>6&63|128,63&s|128),null!==o&&(n>t&&(a+=e.substring(t,n)),a+=o,t=n=r+1)}return n>t&&(a+=e.substring(t,e.length)),a},m.base64Encode=function(e){var t,n,i,r,a,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o=0,c=0,u="",l=[];if(!e)return e;e=m.utf8Encode(e);do{t=(a=e.charCodeAt(o++)<<16|e.charCodeAt(o++)<<8|e.charCodeAt(o++))>>18&63,n=a>>12&63,i=a>>6&63,r=63&a,l[c++]=s.charAt(t)+s.charAt(n)+s.charAt(i)+s.charAt(r)}while(o<e.length);switch(u=l.join(""),e.length%3){case 1:u=u.slice(0,-2)+"==";break;case 2:u=u.slice(0,-1)+"="}return u},m.encodeDates=function(e){return m.each(e,(function(t,n){if(m.isDate(t))e[n]=m.formatDate(t);else if(m.isObject(t))e[n]=m.encodeDates(t);else if(m.isArray(t))for(var i=0;i<t.length;i++)m.isDate(t[i])&&(e[n][i]=m.formatDate(t[i]))})),e},m.formatDate=function(e){function t(e){return e<10?"0"+e:e}return e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+" "+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())+"."+((n=e.getMilliseconds())<100&&n>9?"0"+n:n<10?"00"+n:n);var n},m.searchObjDate=function(e){try{(m.isObject(e)||m.isArray(e))&&m.each(e,(function(t,n){m.isObject(t)||m.isArray(t)?m.searchObjDate(e[n]):m.isDate(t)&&(e[n]=m.formatDate(t))}))}catch(e){I.warn(e)}},m.UUID=function(){var e=(new Date).getTime();return String(Math.random()).replace(".","").slice(1,11)+"-"+e},m.UUIDv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},m.setMpPlatform=function(e){m.mpPlatform=e},m.getMpPlatform=function(){return m.mpPlatform},m.createExtraHeaders=function(){return{"GE-Integration-Type":d,"GE-Integration-Version":f,"GE-Integration-Count":"1","GE-Integration-Extra":m.getMpPlatform()}},m.checkAppId=function(e){if("number"==typeof e)e=String(e);else if("string"!=typeof e)return"";return e=e.replace(/\s*/g,"")},m.checkUrl=function(e){return e=e.replace(/\s*/g,""),e=m.url("basic",e)},m.url=function(){function e(){return new RegExp(/(.*?)\.?([^.]*?)\.(com|net|org|biz|ws|in|me|co\.uk|co|org\.uk|ltd\.uk|plc\.uk|me\.uk|edu|mil|br\.com|cn\.com|eu\.com|hu\.com|no\.com|qc\.com|sa\.com|se\.com|se\.net|us\.com|uy\.com|ac|co\.ac|gv\.ac|or\.ac|ac\.ac|af|am|as|at|ac\.at|co\.at|gv\.at|or\.at|asn\.au|com\.au|edu\.au|org\.au|net\.au|id\.au|be|ac\.be|adm\.br|adv\.br|am\.br|arq\.br|art\.br|bio\.br|cng\.br|cnt\.br|com\.br|ecn\.br|eng\.br|esp\.br|etc\.br|eti\.br|fm\.br|fot\.br|fst\.br|g12\.br|gov\.br|ind\.br|inf\.br|jor\.br|lel\.br|med\.br|mil\.br|net\.br|nom\.br|ntr\.br|odo\.br|org\.br|ppg\.br|pro\.br|psc\.br|psi\.br|rec\.br|slg\.br|tmp\.br|tur\.br|tv\.br|vet\.br|zlg\.br|br|ab\.ca|bc\.ca|mb\.ca|nb\.ca|nf\.ca|ns\.ca|nt\.ca|on\.ca|pe\.ca|qc\.ca|sk\.ca|yk\.ca|ca|cc|ac\.cn|net\.cn|com\.cn|edu\.cn|gov\.cn|org\.cn|bj\.cn|sh\.cn|tj\.cn|cq\.cn|he\.cn|nm\.cn|ln\.cn|jl\.cn|hl\.cn|js\.cn|zj\.cn|ah\.cn|gd\.cn|gx\.cn|hi\.cn|sc\.cn|gz\.cn|yn\.cn|xz\.cn|sn\.cn|gs\.cn|qh\.cn|nx\.cn|xj\.cn|tw\.cn|hk\.cn|mo\.cn|cn|cx|cz|de|dk|fo|com\.ec|tm\.fr|com\.fr|asso\.fr|presse\.fr|fr|gf|gs|co\.il|net\.il|ac\.il|k12\.il|gov\.il|muni\.il|ac\.in|co\.in|org\.in|ernet\.in|gov\.in|net\.in|res\.in|is|it|ac\.jp|co\.jp|go\.jp|or\.jp|ne\.jp|ac\.kr|co\.kr|go\.kr|ne\.kr|nm\.kr|or\.kr|li|lt|lu|asso\.mc|tm\.mc|com\.mm|org\.mm|net\.mm|edu\.mm|gov\.mm|ms|nl|no|nu|pl|ro|org\.ro|store\.ro|tm\.ro|firm\.ro|www\.ro|arts\.ro|rec\.ro|info\.ro|nom\.ro|nt\.ro|se|si|com\.sg|org\.sg|net\.sg|gov\.sg|sk|st|tf|ac\.th|co\.th|go\.th|mi\.th|net\.th|or\.th|tm|to|com\.tr|edu\.tr|gov\.tr|k12\.tr|net\.tr|org\.tr|com\.tw|org\.tw|net\.tw|ac\.uk|uk\.com|uk\.net|gb\.com|gb\.net|vg|sh|kz|ch|info|ua|gov|name|pro|ie|hk|com\.hk|org\.hk|net\.hk|edu\.hk|us|tk|cd|by|ad|lv|eu\.lv|bz|es|jp|cl|ag|mobi|eu|co\.nz|org\.nz|net\.nz|maori\.nz|iwi\.nz|io|la|md|sc|sg|vc|tw|travel|my|se|tv|pt|com\.pt|edu\.pt|asia|fi|com\.ve|net\.ve|fi|org\.ve|web\.ve|info\.ve|co\.ve|tel|im|gr|ru|net\.ru|org\.ru|hr|com\.hr|ly|xyz)$/)}function t(e,t){var n=e.charAt(0),i=t.split(n);return n===e?i:i[(e=parseInt(e.substring(1),10))<0?i.length+e:e-1]}function n(e,t){for(var n,i=e.charAt(0),r=t.split("&"),a=[],s={},o=[],c=e.substring(1),u=0,l=r.length;u<l;u++)if((a=r[u].match(/(.*?)=(.*)/))||(a=[r[u],r[u],""]),""!==a[1].replace(/\s/g,"")){if(a[2]=(n=a[2]||"",m.decodeURIComponent(n.replace(/\+/g," "))),c===a[1])return a[2];(o=a[1].match(/(.*)\[([0-9]+)\]/))?(s[o[1]]=s[o[1]]||[],s[o[1]][o[2]]=a[2]):s[a[1]]=a[2]}return i===e?s:s[c]}return function(i,r){var a,s={};if("tld?"===i)return e();if(r=r||window.location.toString(),!i)return r;if(i=i.toString(),r.match(/^mailto:([^/].+)/))a=r.match(/^mailto:([^/].+)/),s.protocol="mailto",s.email=a[1];else{if(r.match(/(.*?)\/#!(.*)/)&&(a=r.match(/(.*?)\/#!(.*)/),r=a[1]+a[2]),r.match(/(.*?)#(.*)/)&&(a=r.match(/(.*?)#(.*)/),s.hash=a[2],r=a[1]),s.hash&&i.match(/^#/))return n(i,s.hash);if(r.match(/(.*?)\?(.*)/)&&(a=r.match(/(.*?)\?(.*)/),s.query=a[2],r=a[1]),s.query&&i.match(/^\?/))return n(i,s.query);if(r.match(/(.*?):?\/\/(.*)/)&&(a=r.match(/(.*?):?\/\/(.*)/),s.protocol=a[1].toLowerCase(),r=a[2]),r.match(/(.*?)(\/.*)/)&&(a=r.match(/(.*?)(\/.*)/),s.path=a[2],r=a[1]),s.path=(s.path||"").replace(/^([^/])/,"/$1").replace(/\/$/,""),i.match(/^[-0-9]+$/)&&(i=i.replace(/^([^/])/,"/$1")),i.match(/^\//))return t(i,s.path.substring(1));if((a=t("/-1",s.path.substring(1)))&&(a=a.match(/(.*?)\.(.*)/))&&(s.file=a[0],s.filename=a[1],s.fileext=a[2]),r.match(/(.*):([0-9]+)$/)&&(a=r.match(/(.*):([0-9]+)$/),s.port=a[2],r=a[1]),r.match(/(.*?)@(.*)/)&&(a=r.match(/(.*?)@(.*)/),s.auth=a[1],r=a[2]),s.auth&&(a=s.auth.match(/(.*):(.*)/),s.user=a?a[1]:s.auth,s.pass=a?a[2]:void 0),s.hostname=r.toLowerCase(),"."===i.charAt(0))return t(i,s.hostname);e()&&(a=s.hostname.match(e()))&&(s.tld=a[3],s.domain=a[2]?a[2]+"."+a[3]:void 0,s.sub=a[1]||void 0);var o=s.port?":"+s.port:"";s.protocol=s.protocol||window.location.protocol.replace(":",""),s.port=s.port||("https"===s.protocol?"443":"80"),s.protocol=s.protocol||("443"===s.port?"https":"http"),s.basic=s.protocol+"://"+s.hostname+o}return i in s?s[i]:"{}"===i?s:""}}(),m.createString=function(e){for(var t=e,n=Math.random().toString(36).substr(2);n.length<t;)n+=Math.random().toString(36).substr(2);return n=n.substr(0,e)},m.createAesKey=function(){return m.createString(16)},m.setQuery=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")},m.generateEncryptyData=function(e,t){if(void 0===t)return e;var n=t.publicKey,i=t.version;if(void 0===n||void 0===i)return e;if("undefined"==typeof CryptoJS||"undefined"==typeof JSEncrypt)return e;var r=m.createAesKey();try{var a=CryptoJS.enc.Utf8.parse(r),s=CryptoJS.enc.Utf8.parse(JSON.stringify(e)),o=m.isUndefined(CryptoJS.pad.Pkcs7)?CryptoJS.pad.PKCS7:CryptoJS.pad.Pkcs7,c=CryptoJS.AES.encrypt(s,a,{mode:CryptoJS.mode.ECB,padding:o}).toString(),u=new JSEncrypt;u.setPublicKey(n);var l=u.encrypt(r);return!1===l?(I.warn("私钥加密失败，返回原数据"),e):{pkv:i,ekey:l,payload:c}}catch(e){I.warn("数据加密失败，返回原数据: "+e)}return e};var I="object"===i(I)?I:{};I.info=function(){if("object"===("undefined"==typeof console?"undefined":i(console))&&console.log&&I.enabled)try{return console.log.apply(console,arguments)}catch(e){console.log(arguments[0])}},I.warn=function(){if("object"===("undefined"==typeof console?"undefined":i(console))&&console.log&&I.enabled)try{return console.warn.apply(console,arguments)}catch(e){console.warn(arguments[0])}};var O=function(){function e(){s(this,e),this.config={persistenceName:"GravityEngine",persistenceNameOld:"GravityEngine_mg"}}return c(e,[{key:"getConfig",value:function(){return this.config}},{key:"getStorage",value:function(e,t,n){var i=localStorage.getItem(e);if(!t)return m.isJSONString(i)?JSON.parse(i):{};m.isJSONString(i)?n(JSON.parse(i)):n({})}},{key:"setStorage",value:function(e,t){localStorage.setItem(e,t)}},{key:"_setSystemProxy",value:function(e){this._sysCallback=e}},{key:"getSystemInfo",value:function(e){var t={mp_platform:"web",system:this._getOs(),screenWidth:window.screen.width,screenHeight:window.screen.height,systemLanguage:navigator.language};this._sysCallback&&(t=m.extend(t,this._sysCallback(e))),e.success(t),e.complete()}},{key:"_getOs",value:function(){var e=navigator.userAgent;return/Windows/i.test(e)?/Phone/.test(e)||/WPDesktop/.test(e)?"Windows Phone":"Windows":/(iPhone|iPad|iPod)/.test(e)?"iOS":/Android/.test(e)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Mac/i.test(e)?"MacOS":/Linux/.test(e)?"Linux":/CrOS/.test(e)?"ChromeOS":""}},{key:"getNetworkType",value:function(e){e.complete()}},{key:"onNetworkStatusChange",value:function(){}},{key:"request",value:function(e){var t={},n=new XMLHttpRequest;if(n.open(e.method,e.url),e.header)for(var i in e.header)n.setRequestHeader(i,e.header[i]);return n.onreadystatechange=function(){4===n.readyState&&200===n.status?(t.statusCode=200,m.isJSONString(n.responseText)&&(t.data=JSON.parse(n.responseText)),e.success(t)):200!==n.status&&(t.errMsg="network error",e.fail(t))},n.ontimeout=function(){t.errMsg="timeout",e.fail(t)},n.send(e.data),n}},{key:"initAutoTrackInstance",value:function(e,t){this.instance=e,this.autoTrack=t.autoTrack;var n=this;"onpagehide"in window?window.onpagehide=function(){n.onPageHide(!0)}:window.onbeforeunload=function(){n.onPageHide(!0)},n.onPageShow(),n.autoTrack.appHide&&n.instance.timeEvent("ta_page_hide"),"onvisibilitychange"in document&&(document.onvisibilitychange=function(){document.hidden?n.onPageHide(!1):(n.onPageShow(),n.autoTrack.appHide&&n.instance.timeEvent("ta_page_hide"))})}},{key:"setGlobal",value:function(e,t){window[t]=e}},{key:"getAppOptions",value:function(){}},{key:"showToast",value:function(){}},{key:"onPageShow",value:function(){if(this.autoTrack.appShow){var e={};m.extend(e,this.autoTrack.properties),m.isFunction(this.autoTrack.callback)&&m.extend(e,this.autoTrack.callback("appShow")),this.instance._internalTrack("ta_page_show",e)}}},{key:"onPageHide",value:function(e){if(this.autoTrack.appHide){var t={};m.extend(t,this.autoTrack.properties),m.isFunction(this.autoTrack.callback)&&m.extend(t,this.autoTrack.callback("appHide")),this.instance._internalTrack("ta_page_hide",t,new Date,null,e)}}}],[{key:"createInstance",value:function(){return new e}}]),e}(),x=function(){function e(t,n){if(s(this,e),this.taInstance=t,this.config=n||{},this.referrer="Directly open",this.config.isPlugin)t.App=function(){App.apply(this,arguments)},inension(t.Page);else{var i=App;App=this._initAppExtention(i);var r=Page;Page=this._initPageExtension(r)}}return c(e,[{key:"_initPageExtension",value:function(e){var t=this;return function(n){var i=n.onLoad,r=n.onShow,a=n.onShareAppMessage,s={};return n.onLoad=function(e){s=e||{},"function"==typeof i&&i.call(this,e)},n.onShow=function(e){t.onPageShow(s),"function"==typeof r&&r.call(this,e)},"function"==typeof a&&(n.onShareAppMessage=function(e){var n=a.call(this,e);return t.onPageShare(n)}),e(n)}}},{key:"_initAppExtention",value:function(e){var t=this;return function(n){var i=n.onLaunch,r=n.onShow,a=n.onHide;return n.onLaunch=function(e){t.onAppLaunch(e,this),"function"==typeof i&&i.call(this,e)},n.onShow=function(e){t.onAppShow(e),"function"==typeof r&&r.call(this,e)},n.onHide=function(){t.onAppHide(),"function"==typeof a&&a.call(this)},e(n)}}},{key:"onAppLaunch",value:function(e,t){if(this._setAutoTrackProperties(e),m.isUndefined(t)||(t[this.taInstance.name]=this.taInstance),this.config.appLaunch){var n={};e&&e.path&&(n.$url_query=m.setQuery(e.query),n.$scene=String(e.scene)),this.taInstance._internalTrack("$MPLaunch",n)}}},{key:"onAppShow",value:function(e){if(this.config.appHide&&this.taInstance.timeEvent("$MPHide"),this._setAutoTrackProperties(e),this.config.appShow){var t={};e&&e.path&&(t.$url_path=this._getPath(e.path),t.$url_query=m.setQuery(e.query),t.$scene=String(e.scene)),m.extend(t,this.config.properties),m.isFunction(this.config.callback)&&m.extend(t,this.config.callback("appShow")),this.taInstance._internalTrack("$MPShow",t)}}},{key:"onAppHide",value:function(){if(this.config.appHide){var e={};m.extend(e,this.config.properties),m.isFunction(this.config.callback)&&m.extend(e,this.config.callback("appHide")),this.taInstance._internalTrack("$MPHide",e)}}},{key:"_getCurrentPath",value:function(){var e="Not to get";try{var t=getCurrentPages();e=t[t.length-1].route}catch(e){I.info(e)}return e}},{key:"_setAutoTrackProperties",value:function(e){this.taInstance._setAutoTrackProperties({})}},{key:"_getPath",value:function(e){return"string"==typeof e?e.replace(/^\//,""):"Abnormal values"}},{key:"onPageShare",value:function(e){if(this.config.pageShare){var t=1;try{t=getCurrentPages().length}catch(e){t=1}console.log({$share_method:"转发消息卡片",$share_depth:t,$url_path:this._getCurrentPath()},"$MPShare"),this.taInstance._internalTrack("$MPShare",{$share_method:"转发消息卡片",$share_depth:t,$url_path:this._getCurrentPath()})}return m.isObject(e)?e:{}}},{key:"onPageShow",value:function(e){if(this.config.pageShow){var t=this._getCurrentPath(),n={$url_path:t||"The system did not get a value",$url_query:m.setQuery(e)};this.referrer=t,this.taInstance._internalTrack("$MPViewScreen",n)}}}]),e}(),T=function(){function e(t,n,i){var r=this;s(this,e),this.taInstance=t,this.config=n||{};var a=i.getLaunchOptionsSync();this._onShow(a),this.startTracked=!0,i.onShow((function(e){r._onShow(e)})),i.onHide((function(){if(r.startTracked=!1,r.config.appHide){var e={};m.extend(e,r.config.properties),m.isFunction(r.config.callback)&&m.extend(e,r.config.callback("appHide")),r.taInstance._internalTrack("$MPHide",e)}}))}return c(e,[{key:"_onShow",value:function(e){if(!this.startTracked&&(this.config.appHide&&this.taInstance.timeEvent("$MPHide"),this.config.appShow)){var n={};m.extend(n,this.config.properties),m.isFunction(this.config.callback)&&m.extend(n,this.config.callback("appShow")),this.taInstance._internalTrack("$MPShow",t(t({},n),{},{$scene:String(e.scene),$url_query:m.setQuery($.getAppOptions().query)}))}}}]),e}(),A=function(){function e(t,n,i){s(this,e),this.api=t,this.config=n,this._config=i}return c(e,[{key:"getConfig",value:function(){return this.config}},{key:"getStorage",value:function(e,t,n){if(!t){if("dd_mp"===this._config.platform){var i=this.api.getStorageSync({key:e});return m.isJSONString(i.data)?JSON.parse(i.data):{}}var r=this.api.getStorageSync(e);return m.isJSONString(r)?JSON.parse(r):{}}this.api.getStorage({key:e,success:function(e){var t=m.isJSONString(e.data)?JSON.parse(e.data):{};n(t)},fail:function(){I.warn("getStorage faild"),n({})}})}},{key:"setStorage",value:function(e,t){this.api.setStorage({key:e,data:t})}},{key:"_getPlatform",value:function(){return""}},{key:"getSystemInfo",value:function(e){var t=this._config.mpPlatform;this.api.getSystemInfo({success:function(n){m.isFunction(t)?n.mp_platform=t(n):n.mp_platform=t,e.success(n),"wechat"===t&&e.complete()},complete:function(){e.complete()}})}},{key:"getNetworkType",value:function(e){m.isFunction(this.api.getNetworkType)?this.api.getNetworkType({success:function(t){e.success(t)},complete:function(){e.complete()}}):(e.success({}),e.complete())}},{key:"onNetworkStatusChange",value:function(e){m.isFunction(this.api.onNetworkStatusChange)?this.api.onNetworkStatusChange(e):e({})}},{key:"request",value:function(e){if("ali_mp"===this._config.platform||"dd_mp"===this._config.platform){var t=m.extend({},e);return t.headers=e.header,t.success=function(t){t.statusCode=t.status,e.success(t)},t.fail=function(t){t.errMsg=t.errorMessage,e.fail(t)},"dd_mp"===this._config.platform?this.api.httpRequest(t):this.api.request(t)}return this.api.request(e)}},{key:"initAutoTrackInstance",value:function(e,t){return m.isObject(t.autoTrack)&&(t.autoTrack.isPlugin=t.is_plugin),this._config.mp?new x(e,t.autoTrack,this.api):new T(e,t.autoTrack,this.api)}},{key:"setGlobal",value:function(e,t){this._config.mp?I.warn("GravityAnalytics: we do not set global name for GE instance when you do not enable auto track."):GameGlobal[t]=e}},{key:"getAppOptions",value:function(e){var t={};try{t=this.api.getLaunchOptionsSync()}catch(e){I.warn("Cannot get launch options.")}if(m.isFunction(e))try{this._config.mp?this.api.onAppShow(e):this.api.onShow(e)}catch(e){I.warn("Cannot register onShow callback.")}return t}},{key:"showToast",value:function(e){if(m.isFunction(this.api.showToast)){var t={title:e};"dd_mp"!==this._config.platform&&"ali_mp"!==this._config.platform||(t.content=e),this.api.showToast(t)}}}],[{key:"createInstance",value:function(){return this._createInstance("R_CURRENT_PLATFORM")}},{key:"_createInstance",value:function(t){switch(t){case"wechat_mp":return new e(wx,{persistenceName:"GravityEngine",persistenceNameOld:"GravityEngine_wechat"},{mpPlatform:"wechat",mp:!0,platform:t});case"wechat_mg":return new e(wx,{persistenceName:"GravityEngine",persistenceNameOld:"GravityEngine_wechat_game"},{mpPlatform:"wechat",platform:t});case"qq_mp":return new e(qq,{persistenceName:"GravityEngine",persistenceNameOld:"GravityEngine_qq"},{mpPlatform:"qq",mp:!0,platform:t});case"qq_mg":return new e(qq,{persistenceName:"GravityEngine",persistenceNameOld:"GravityEngine_qq_game"},{mpPlatform:"qq",platform:t});case"baidu_mp":return new e(swan,{persistenceName:"GravityEngine",persistenceNameOld:"GravityEngine_swan"},{mpPlatform:function(e){return e.host},mp:!0,platform:t});case"baidu_mg":return new e(swan,{persistenceName:"GravityEngine",persistenceNameOld:"GravityEngine_swan_game"},{mpPlatform:function(e){return e.host},platform:t});case"tt_mg":return new e(tt,{persistenceName:"GravityEngine",persistenceNameOld:"GravityEngine_tt_game"},{mpPlatform:function(e){return e.appName},platform:t});case"tt_mp":return new e(tt,{persistenceName:"GravityEngine",persistenceNameOld:"GravityEngine_tt"},{mpPlatform:function(e){return e.appName},mp:!0,platform:t});case"ali_mp":return new e(my,{persistenceName:"GravityEngine",persistenceNameOld:"GravityEngine_ali"},{mpPlatform:function(e){return e.app},mp:!0,platform:t});case"dd_mp":return new e(dd,{persistenceName:"GravityEngine",persistenceNameOld:"GravityEngine_dd"},{mpPlatform:"dingding",mp:!0,platform:t});case"bl_mg":return new e(bl,{persistenceName:"GravityEngine",persistenceNameOld:"GravityEngine_mg"},{mpPlatform:"bilibili",platform:t});case"kuaishou_mp":return new e(ks,{persistenceName:"GravityEngine",persistenceNameOld:"GravityEngine_kuaishou"},{mpPlatform:"kuaishou",mp:!0,platform:t});case"qh360_mg":return new e(qh,{persistenceName:"GravityEngine",persistenceNameOld:"GravityEngine_qh360"},{mpPlatform:"qh360",platform:t});case"tb_mp":return new e(my,{persistenceName:"GravityEngine",persistenceNameOld:"GravityEngine_tb"},{mpPlatform:"tb",mp:!0,platform:t});case"jd_mp":return new e(jd,{persistenceName:"GravityEngine",persistenceNameOld:"GravityEngine_jd"},{mpPlatform:"jd",mp:!0,platform:t});case"qh360_mp":return new e(qh,{persistenceName:"GravityEngine",persistenceNameOld:"GravityEngine_qh360"},{mpPlatform:"qh360",mp:!0,platform:t});case"WEB":return new O.createInstance}}}]),e}(),E=c((function e(t,n){var i=this;s(this,e),this.taInstance=t,this.config=n||{},this.config.appShow&&this.taInstance._internalTrack("$MPShow"),this.config.appHide&&this.taInstance.timeEvent("$MPHide"),qg.onShow((function(){if(i.config.appHide&&i.taInstance.timeEvent("$MPHide"),i.config.appShow){var e={};m.extend(e,i.config.properties),m.isFunction(i.config.callback)&&m.extend(e,i.config.callback("appShow")),i.taInstance._internalTrack("$MPShow")}})),qg.onHide((function(){if(i.config.appHide){var e={};m.extend(e,i.config.properties),m.isFunction(i.config.callback)&&m.extend(e,i.config.callback("appHide")),i.taInstance._internalTrack("$MPHide")}}))})),D=function(){function e(){s(this,e),this.config={persistenceName:"gravityengine",persistenceNameOld:"gravityengine_qg_vivo_game",asyncPersistence:!0}}return c(e,[{key:"getConfig",value:function(){return this.config||{}}},{key:"getStorage",value:function(e,t,n){if(!t){var i=qg.getStorageSync({key:e});return m.isJSONString(i)?JSON.parse(i):{}}qg.getStorage({key:e,success:function(e){var t=m.isJSONString(e)?JSON.parse(e):{};n(t)},fail:function(){n({})}})}},{key:"setStorage",value:function(e,t){qg.setStorage({key:e,value:t})}},{key:"getSystemInfo",value:function(e){qg.getSystemInfo({success:function(t){var n=t,i=[t.osType,t.osVersionName].join(" ");n.brand=t.manufacturer,n.system=i,n.mp_platform="vivo_qg",e.success(n)},complete:function(){e.complete()}})}},{key:"getNetworkType",value:function(e){qg.getNetworkType({success:function(t){var n=t;n.networkType=t.type,e.success(n)},complete:function(){e.complete()}})}},{key:"onNetworkStatusChange",value:function(e){qg.subscribeNetworkStatus({callback:function(t){var n=t;n.networkType=t.type,e(n)}})}},{key:"request",value:function(e){return qg.request({url:e.url,data:e.data,method:e.method,header:e.header,success:function(t){e.success(t)},fail:function(t){e.fail(t)}})}},{key:"initAutoTrackInstance",value:function(e,t){return new E(e,t.autoTrack)}},{key:"setGlobal",value:function(e,t){globalThis[t]=e}},{key:"getAppOptions",value:function(){return{}}},{key:"showToast",value:function(e){qg.showToast({message:e,duration:0})}}],[{key:"createInstance",value:function(){return new e}}]),e}(),C=c((function e(t,n,i){var r=this;if(s(this,e),this.taInstance=t,this.config=n||{},this.config.appShow){var a={};m.extend(a,this.config.properties),m.isFunction(this.config.callback)&&m.extend(a,this.config.callback("appShow")),this.taInstance._internalTrack("$MPShow",a)}this.config.appHide&&this.taInstance.timeEvent("$MPHide"),i.onShow((function(){if(r.config.appHide&&r.taInstance.timeEvent("$MPHide"),r.config.appShow){var e={};m.extend(e,r.config.properties),m.isFunction(r.config.callback)&&m.extend(e,r.config.callback("appShow")),r.taInstance._internalTrack("$MPShow",e)}})),i.onHide((function(){if(r.config.appHide){var e={};m.extend(e,r.config.properties),m.isFunction(r.config.callback)&&m.extend(e,r.config.callback("appHide")),r.taInstance._internalTrack("$MPHide",e)}}))})),U=function(){function e(t,n,i){s(this,e),this.api=t,this.config=n,this._config=i}return c(e,[{key:"getConfig",value:function(){return this.config||{}}},{key:"getStorage",value:function(e,t,n){var i=localStorage.getItem(e);if(!t)return m.isJSONString(i)?JSON.parse(i):{};m.isJSONString(i)?n(JSON.parse(i)):n({})}},{key:"setStorage",value:function(e,t){localStorage.setItem(e,t)}},{key:"getSystemInfo",value:function(e){var t=this._config.mpPlatform;this.api.getSystemInfo({success:function(n){n.mp_platform=t,e.success(n)},complete:function(){e.complete()}})}},{key:"getNetworkType",value:function(e){this.api.getNetworkType({success:function(t){e.success(t)},complete:function(){e.complete()}})}},{key:"onNetworkStatusChange",value:function(e){this.api.onNetworkStatusChange({callback:function(t){e(t)}})}},{key:"request",value:function(e){var t={},n=new XMLHttpRequest;if(n.open(e.method,e.url),e.header)for(var i in e.header)n.setRequestHeader(i,e.header[i]);return n.onreadystatechange=function(){4===n.readyState&&200===n.status?(t.statusCode=200,m.isJSONString(n.responseText)&&(t.data=JSON.parse(n.responseText)),e.success(t)):200!==n.status&&(t.errMsg="network error",e.fail(t))},n.ontimeout=function(){t.errMsg="timeout",e.fail(t)},n.send(e.data),n}},{key:"initAutoTrackInstance",value:function(e,t){return new C(e,t.autoTrack,this.api)}},{key:"setGlobal",value:function(e,t){globalThis[t]=e}},{key:"getAppOptions",value:function(){return this.api.getLaunchOptionsSync()}},{key:"showToast",value:function(e){this.api.showToast({title:e,icon:"none",duration:2e3})}}],[{key:"createInstance",value:function(){return this._createInstance("R_CURRENT_PLATFORM")}},{key:"_createInstance",value:function(t){switch(t){case"oppo":return new e(qg,{persistenceName:"gravityengine",persistenceNameOld:"gravityengine_qg_oppo_game"},{mpPlatform:"oppo_qg"});case"huawei":return new e(hbs,{persistenceName:"gravityengine",persistenceNameOld:"gravityengine_qg_huawei_game"},{mpPlatform:"huawei_qg"});case"mz":return new e(qg,{persistenceName:"gravityengine",persistenceNameOld:"gravityengine_qg_mz_game"},{mpPlatform:"mz"});case"xiaomi":return new e(qg,{persistenceName:"gravityengine",persistenceNameOld:"gravityengine_qg"},{mpPlatform:"xiaomi"})}}}]),e}(),q=function(){function e(){s(this,e)}return c(e,null,[{key:"createInstance",value:function(){return Laya.Browser.onMiniGame?A._createInstance("wechat_mg"):Laya.Browser.onBDMiniGame?A._createInstance("baidu_mg"):Laya.Browser.onVVMiniGame?D.createInstance():Laya.Browser.onQQMiniGame?A._createInstance("qq_mg"):Laya.Browser.onQGMiniGame?U._createInstance("oppo"):Laya.Browser.onHWMiniGame?U._createInstance("huawei"):Laya.Browser.onKGMiniGame?U._createInstance("xiaomi"):Laya.Browser.onTTMiniGame?A._createInstance("tt_mg"):Laya.Browser.onBLMiniGame?A._createInstance("bl_mg"):Laya.Browser.onAlipayMiniGame?A._createInstance("ali_mp"):Laya.Browser.onTBMiniGame?A._createInstance("tb_mp"):O.createInstance()}}]),e}(),$=function(){function e(){s(this,e)}return c(e,null,[{key:"_getCurrentPlatform",value:function(){return this.currentPlatform||(this.currentPlatform=q.createInstance())}},{key:"getConfig",value:function(){return this._getCurrentPlatform().getConfig()}},{key:"getStorage",value:function(e,t,n){return this._getCurrentPlatform().getStorage(e,t,n)}},{key:"setStorage",value:function(e,t){return this._getCurrentPlatform().setStorage(e,t)}},{key:"getSystemInfo",value:function(e){return this._getCurrentPlatform().getSystemInfo(e)}},{key:"getNetworkType",value:function(e){return this._getCurrentPlatform().getNetworkType(e)}},{key:"getQuickDevice",value:function(e){return this._getCurrentPlatform().getQuickDevice(e)}},{key:"onNetworkStatusChange",value:function(e){this._getCurrentPlatform().onNetworkStatusChange(e)}},{key:"request",value:function(e){return this._getCurrentPlatform().request(e)}},{key:"initAutoTrackInstance",value:function(e,t){return this._getCurrentPlatform().initAutoTrackInstance(e,t)}},{key:"setGlobal",value:function(e,t){e&&t&&this._getCurrentPlatform().setGlobal(e,t)}},{key:"getAppOptions",value:function(e){return this._getCurrentPlatform().getAppOptions(e)}},{key:"showDebugToast",value:function(e){this._getCurrentPlatform().showToast(e)}}]),e}(),j=/^\$?[a-zA-Z][a-zA-Z0-9_]{0,49}$/,F=function(){function e(){s(this,e)}return c(e,null,[{key:"stripProperties",value:function(e){return m.isObject(e)?(m.each(e,(function(e,t){m.isString(e)||m.isNumber(e)||m.isDate(e)||m.isBoolean(e)||m.isArray(e)||m.isObject(e)||I.warn("Your data -",t,e,"- format does not meet requirements and may not be stored correctly. Attribute values only support String, Number, Date, Boolean, Array, Object")})),e):e}},{key:"_checkPropertiesKey",value:function(e){var t=!0;return m.each(e,(function(e,n){j.test(n)||(I.warn("Invalid KEY: "+n),t=!1)})),t}},{key:"event",value:function(e){return!(!m.isString(e)||!j.test(e))||(I.warn("Check the parameter format. The eventName must start with an English letter and contain no more than 50 characters including letters, digits, and underscores: "+e),!1)}},{key:"propertyName",value:function(e){return!(!m.isString(e)||!j.test(e))||(I.warn("Check the parameter format. PropertyName must start with a letter and contain letters, digits, and underscores (_). The value is a string of no more than 50 characters: "+e),!1)}},{key:"properties",value:function(e){return this.stripProperties(e),!e||(m.isObject(e)?!!this._checkPropertiesKey(e)||(I.warn("Check the parameter format. The properties key must start with a letter, contain digits, letters, and underscores (_), and contain a maximum of 50 characters"),!1):(I.warn("properties can be none, but it must be an object"),!1))}},{key:"propertiesMust",value:function(e){return this.stripProperties(e),void 0===e||!m.isObject(e)||m.isEmptyObject(e)?(I.warn("properties must be an object with a value"),!1):!!this._checkPropertiesKey(e)||(I.warn("Check the parameter format. The properties key must start with a letter, contain digits, letters, and underscores (_), and contain a maximum of 50 characters"),!1)}},{key:"userId",value:function(e){return!(!m.isString(e)||!/^.{1,64}$/.test(e))||(I.warn("The user ID must be a string of less than 64 characters and cannot be null"),!1)}},{key:"userAddProperties",value:function(e){if(!this.propertiesMust(e))return!1;for(var t in e)if(!m.isNumber(e[t]))return I.warn("The attributes of userAdd need to be Number"),!1;return!0}},{key:"userAppendProperties",value:function(e){if(!this.propertiesMust(e))return!1;for(var t in e)if(!m.isArray(e[t]))return I.warn("The attribute of userAppend must be Array"),!1;return!0}}]),e}(),J=function(){function e(t,n,i,r,a,o){s(this,e),this.data=t,this.serverUrl=n,this.callback=o,this.debugMode=a,this.tryCount=m.isNumber(i)?i:1,this.permissionTryCount=6,this.timeout=m.isNumber(r)?r:3e3,this.taClassName="HttpTask"}return c(e,[{key:"run",value:function(){var e=this,t=m.createExtraHeaders();t["content-type"]="application/json","debug"===this.debugMode&&(t["Turbo-Debug-Mode"]=1);var n=$.request({url:this.serverUrl,method:"POST",data:this.data,header:t,success:function(t){var n;0===(null==t||null===(n=t.data)||void 0===n?void 0:n.code)?e.onSuccess(t):e.onFailed(t)},fail:function(t){e.onFailed(t)}});setTimeout((function(){(m.isObject(n)||m.isPromise(n))&&m.isFunction(n.abort)&&n.abort()}),this.timeout)}},{key:"onSuccess",value:function(e){if(200===e.statusCode){var t,n,i="Data Verified";null!=e&&null!==(t=e.data)&&void 0!==t&&null!==(t=t.extra)&&void 0!==t&&null!==(t=t.errors)&&void 0!==t&&t.length&&(i=e.data.extra.errors),this.callback({code:null==e||null===(n=e.data)||void 0===n?void 0:n.code,msg:i})}else this.callback({code:-3,msg:e.statusCode})}},{key:"onFailed",value:function(e){var t,n=this;if(2e3===(null==e||null===(t=e.data)||void 0===t?void 0:t.code)&&--this.permissionTryCount>0)setTimeout((function(){n.run()}),6e3);else if(--this.tryCount>0)setTimeout((function(){n.run()}),1e3);else{var i,r;this.callback({code:-3,msg:"".concat(null==e||null===(i=e.data)||void 0===i?void 0:i.msg,"：").concat(null==e||null===(r=e.data)||void 0===r||null===(r=r.extra)||void 0===r?void 0:r.error)})}}}]),e}(),M=new(function(){function e(){s(this,e),this.items=[],this.isRunning=!1,this.showDebug=!1}return c(e,[{key:"enqueue",value:function(e,t,n){var i,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a="debug"===n.debugMode,s=this;i=new J(JSON.stringify(e),t,n.maxRetries,n.sendTimeout,n.debugMode,(function(e){s.isRunning=!1,m.isFunction(n.callback)&&n.callback(e),s._runNext(a),a&&I.info("code ".concat(e.code," and msg is ").concat(e.msg))})),!0===r?(this.items.push(i),this._runNext(a)):i.run()}},{key:"_dequeue",value:function(){return this.items.shift()}},{key:"_runNext",value:function(e){if(this.items.length>0&&!this.isRunning)if(this.isRunning=!0,e)this._dequeue().run();else{for(var t=this.items.splice(0,this.items.length),n=t[0],i=JSON.parse(n.data),r=1;r<t.length;r++){var a=t[r],s=JSON.parse(a.data);i.event_list=i.event_list.concat(s.event_list)}var o=(new Date).getTime();i.$flush_time=o,new J(JSON.stringify(i),n.serverUrl,n.tryCount,n.timeout,null==n?void 0:n.debugMode,n.callback).run()}}}]),e}()),G={name:"GravityEngine",is_plugin:!1,maxRetries:3,sendTimeout:5e3,enablePersistence:!0,asyncPersistence:!1,strict:!1,debugMode:"none"},L={properties:{$lib_version:f,$lib:v},getSystemInfo:function(e){var t=this;$.onNetworkStatusChange((function(e){t.properties.$network_type=e.networkType})),$.getNetworkType({success:function(e){t.properties.$network_type=e.networkType},complete:function(){$.getSystemInfo({success:function(e){I.info(JSON.stringify(e,null,4));var n={$manufacturer:e.brand,$brand:e.brand,$model:e.model,$screen_width:Number(e.screenWidth),$screen_height:Number(e.screenHeight),$system_language:e.language,$os:e.platform,$os_version:e.system};m.extend(t.properties,n),m.setMpPlatform(e.mp_platform)},complete:function(){e()}})}})}},R=function(){function e(t,n){var i=this;s(this,e),this.enabled=t.enablePersistence,this.enabled?(t.isChildInstance?(this.name=t.persistenceName+"_"+t.name,this.nameOld=t.persistenceNameOld+"_"+t.name):(this.name=t.persistenceName,this.nameOld=t.persistenceNameOld),t.asyncPersistence?(this._state={},$.getStorage(this.name,!0,(function(e){m.isEmptyObject(e)?$.getStorage(i.nameOld,!0,(function(e){i._state=m.extend2Layers({},e,i._state),i._init(t,n),i._save()})):(i._state=m.extend2Layers({},e,i._state),i._init(t,n),i._save())}))):(this._state=$.getStorage(this.name)||{},m.isEmptyObject(this._state)&&(this._state=$.getStorage(this.nameOld)||{}),this._init(t,n))):(this._state={},this._init(t,n))}return c(e,[{key:"_init",value:function(e,t){this.getDistinctId()||this.setDistinctId(m.UUID()),e.isChildInstance||this.getDeviceId()||this._setDeviceId(m.UUID()),this.initComplete=!0,"function"==typeof t&&t(),this._save()}},{key:"_save",value:function(){this.enabled&&this.initComplete&&$.setStorage(this.name,JSON.stringify(this._state))}},{key:"_set",value:function(e,t){var n,r=this;"string"==typeof e?(n={})[e]=t:"object"===i(e)&&(n=e),m.each(n,(function(e,t){r._state[t]=e})),this._save()}},{key:"_get",value:function(e){return this._state[e]}},{key:"setEventTimer",value:function(e,t){var n=this._state.event_timers||{};n[e]=t,this._set("event_timers",n)}},{key:"removeEventTimer",value:function(e){var t=(this._state.event_timers||{})[e];return m.isUndefined(t)||(delete this._state.event_timers[e],this._save()),t}},{key:"getDeviceId",value:function(){return this._state.device_id}},{key:"_setDeviceId",value:function(e){this.getDeviceId()?I.warn("cannot modify the device id."):this._set("device_id",e)}},{key:"getDistinctId",value:function(){return this._state.distinct_id}},{key:"setDistinctId",value:function(e){this._set("distinct_id",e)}},{key:"getAccountId",value:function(){return this._state.account_id}},{key:"setAccountId",value:function(e){this._set("account_id",e)}},{key:"getSuperProperties",value:function(){return this._state.props||{}}},{key:"setSuperProperties",value:function(e,t){var n=t?e:m.extend(this.getSuperProperties(),e);this._set("props",n)}}]),e}();function H(){return $.getConfig().persistenceNameOld}var B=function(){function e(t){s(this,e),t.appId=m.checkAppId(t.clientId),t.accessToken=t.accessToken,t.appId?t.accessToken||console.warn("GravityAnalytics: accessToken must be required"):console.warn("GravityAnalytics: clientId must be required"),t.serverUrl="".concat(g,"/event/collect/?access_token=").concat(t.accessToken);var n=m.extend({},G,$.getConfig());m.isObject(t)?this.config=m.extend(n,t):this.config=n,this._init(this.config)}var t,i,r;return c(e,[{key:"_init",value:function(e){var t=this;this.name=e.name,this.appId=e.clientId,this.accessToken=e.accessToken;var n=e.serverUrl||e.server_url;this.serverUrl=n,this.serverDebugUrl=n,this.configUrl=n+"/config",this.autoTrackProperties={},this._queue=[],this.config.syncBatchSize=100,this.config.syncInterval=60,e.isChildInstance?this._state={}:(I.enabled="debug"===e.debugMode,this.instances=[],this._state={getSystemInfo:!1,initComplete:!1},L.getSystemInfo((function(){t._updateState({getSystemInfo:!0})})),$.setGlobal(this,this.name)),this.store=new R(e,(function(){t.config.asyncPersistence&&m.isFunction(t.config.persistenceComplete)&&t.config.persistenceComplete(t),t._updateState()})),this.enabled=!m.isBoolean(this.store._get("ge_enabled"))||this.store._get("ge_enabled"),this.isOptOut=!!m.isBoolean(this.store._get("ge_isOptOut"))&&this.store._get("ge_isOptOut"),"GravityEngine_wechat_game"!==H()&&"GravityEngine_tt_game"!==H()||!e.autoTrack.appLaunch||this.track("$MPLaunch",{$url_query:this.setQuery(this.getQuery()),$scene:String($.getAppOptions().scene)}),!e.isChildInstance&&e.autoTrack&&(this.autoTrack=$.initAutoTrackInstance(this,e))}},{key:"updateConfig",value:function(e,t){}},{key:"initInstance",value:function(t,n){if(this.config.isChildInstance)I.warn("initInstance() cannot be called on child instance");else{if(m.isString(t)&&t!==this.name&&m.isUndefined(this[t])){var i=new e(m.extend({},this.config,{enablePersistence:!1,isChildInstance:!0,name:t},n));return this[t]=i,this.instances.push(t),this[t]._state=this._state,i}I.warn("initInstance() failed due to the name is invalid: "+t)}}},{key:"lightInstance",value:function(e){return this[e]}},{key:"_setAutoTrackProperties",value:function(e){m.extend(this.autoTrackProperties,e)}},{key:"init",value:function(){if(this._state.initComplete)return!1;this._updateState({initComplete:!0})}},{key:"_isReady",value:function(){return this._state.getSystemInfo&&this._state.initComplete&&this.store.initComplete&&this.config.appId&&this.config.accessToken}},{key:"_updateState",value:function(e){var t=this;m.isObject(e)&&m.extend(this._state,e),this._onStateChange(),m.each(this.instances,(function(e){t[e]._onStateChange()}))}},{key:"_onStateChange",value:function(){var e=this;this._isReady()&&this._queue&&this._queue.length>0&&(m.each(this._queue,(function(t){e[t[0]].apply(e,k.call(t[1]))})),this._queue=[])}},{key:"_hasDisabled",value:function(){var e=!this.enabled||this.isOptOut;return e&&I.info("GravityEngine is Pause or Stop!"),e}},{key:"_sendRequest",value:function(e,t,n){if(!this._hasDisabled())if(m.isUndefined(this.config.disableEventList)||!this.config.disableEventList.includes(e.eventName)){t=m.isDate(t)?t:new Date;var i={event_list:[{type:e.type,time:Date.now()}]};if(i.event_list[0].event=e.eventName,"track"===e.type){i.event_list[0].properties=this.getSendProperties();var r=this.store.removeEventTimer(e.eventName);if(!m.isUndefined(r)){var a=(new Date).getTime()-r,s=parseFloat((a/1e3).toFixed(3));s>86400?s=86400:s<0&&(s=0),i.event_list[0].properties.$event_duration=s}}else i.event_list[0].properties={};m.isObject(e.properties)&&!m.isEmptyObject(e.properties)&&m.extend(i.event_list[0].properties,e.properties),m.searchObjDate(i.event_list[0]),i.client_id=this.appId,I.info(JSON.stringify(i,null,4));var o=this.serverUrl;if(m.isBoolean(this.config.enableEncrypt)&&1==this.config.enableEncrypt&&(i.event_list[0]=m.generateEncryptyData(i.event_list[0],void 0)),n){var c=new FormData;if("debug"===this.config.debugMode)c.append("source","client"),c.append("appid",this.appId),c.append("deviceId",this.getDeviceId()),c.append("data",JSON.stringify(i.event_list[0]));else{var u=m.base64Encode(JSON.stringify(i));c.append("data",u)}navigator.sendBeacon(o,c),m.isFunction(e.onComplete)&&e.onComplete({statusCode:200})}else M.enqueue(i,o,{maxRetries:this.config.maxRetries,sendTimeout:this.config.sendTimeout,callback:e.onComplete,debugMode:this.config.debugMode})}else I.info("disabled Event : "+e.eventName)}},{key:"_isObjectParams",value:function(e){return m.isObject(e)&&m.isFunction(e.onComplete)}},{key:"track",value:function(e,t,n,i){if(!this._hasDisabled()){if(this._isObjectParams(e)){var r=e;e=r.eventName,t=r.properties,n=r.time,i=r.onComplete}F.event(e)&&F.properties(t)||!this.config.strict?this._internalTrack(e,t,n,i):m.isFunction(i)&&i({code:-1,msg:"invalid parameters"})}}},{key:"_internalTrack",value:function(e,t,n,i,r){this._hasDisabled()||(n=m.isDate(n)?n:new Date,this._isReady()?this._sendRequest({type:"track",eventName:e,properties:t,onComplete:i},n,r):this._queue.push(["_internalTrack",[e,t,n,i]]))}},{key:"userSet",value:function(e,t,n){if(!this._hasDisabled()){if(this._isObjectParams(e)){var i=e;e=i.properties,t=i.time,n=i.onComplete}F.propertiesMust(e)||!this.config.strict?(t=m.isDate(t)?t:new Date,this._isReady()?this._sendRequest({type:"profile",eventName:"profile_set",properties:e,onComplete:n},t):this._queue.push(["userSet",[e,t,n]])):(I.warn("calling userSet failed due to invalid arguments"),m.isFunction(n)&&n({code:-1,msg:"invalid parameters"}))}}},{key:"userSetOnce",value:function(e,t,n){if(!this._hasDisabled()){if(this._isObjectParams(e)){var i=e;e=i.properties,t=i.time,n=i.onComplete}F.propertiesMust(e)||!this.config.strict?(t=m.isDate(t)?t:new Date,this._isReady()?this._sendRequest({type:"profile",eventName:"profile_set_once",properties:e,onComplete:n},t):this._queue.push(["userSetOnce",[e,t,n]])):(I.warn("calling userSetOnce failed due to invalid arguments"),m.isFunction(n)&&n({code:-1,msg:"invalid parameters"}))}}},{key:"userAdd",value:function(e,t,n){if(!this._hasDisabled()){if(this._isObjectParams(e)){var i=e;e=i.properties,t=i.time,n=i.onComplete}F.propertiesMust(e)||!this.config.strict?(t=m.isDate(t)?t:new Date,this._isReady()?this._sendRequest({type:"profile",eventName:"profile_increment",properties:e,onComplete:n},t):this._queue.push(["userAdd",[e,t,n]])):(I.warn("calling userAdd failed due to invalid arguments"),m.isFunction(n)&&n({code:-1,msg:"invalid parameters"}))}}},{key:"userNumberMax",value:function(e,t,n){if(!this._hasDisabled()){if(this._isObjectParams(e)){var i=e;e=i.properties,t=i.time,n=i.onComplete}for(var r in e)if("number"!=typeof e[r]){var a="The key ".concat(r," must be type of number");return console.warn(a),void(m.isFunction(n)&&n({code:-1,msg:a}))}F.propertiesMust(e)||!this.config.strict?(t=m.isDate(t)?t:new Date,this._isReady()?this._sendRequest({type:"profile",eventName:"profile_number_max",properties:e,onComplete:n},t):this._queue.push(["userNumberMax",[e,t,n]])):(I.warn("calling userNumberMax failed due to invalid arguments"),m.isFunction(n)&&n({code:-1,msg:"invalid parameters"}))}}},{key:"userNumberMin",value:function(e,t,n){if(!this._hasDisabled()){if(this._isObjectParams(e)){var i=e;e=i.properties,t=i.time,n=i.onComplete}for(var r in e)if("number"!=typeof e[r]){var a="The key ".concat(r," must be type of number");return console.warn(a),void(m.isFunction(n)&&n({code:-1,msg:a}))}F.propertiesMust(e)||!this.config.strict?(t=m.isDate(t)?t:new Date,this._isReady()?this._sendRequest({type:"profile",eventName:"profile_number_min",properties:e,onComplete:n},t):this._queue.push(["userNumberMin",[e,t,n]])):(I.warn("calling userNumberMin failed due to invalid arguments"),m.isFunction(n)&&n({code:-1,msg:"invalid parameters"}))}}},{key:"userDel",value:function(e,t){var n={};if(!this._hasDisabled()){if(this._isObjectParams(n)){var i=n;n=i.properties,e=i.time,t=i.onComplete}F.propertiesMust(n)||!this.config.strict?(e=m.isDate(e)?e:new Date,this._isReady()?this._sendRequest({type:"profile",eventName:"profile_delete",properties:n,onComplete:t},e):this._queue.push(["userDel",[n,e,t]])):(I.warn("calling userDel failed due to invalid arguments"),m.isFunction(t)&&t({code:-1,msg:"invalid parameters"}))}}},{key:"userAppend",value:function(e,t,n){if(!this._hasDisabled()){if(this._isObjectParams(e)){var i=e;e=i.properties,t=i.time,n=i.onComplete}F.propertiesMust(e)||!this.config.strict?(t=m.isDate(t)?t:new Date,this._isReady()?this._sendRequest({type:"profile",eventName:"profile_append",properties:e,onComplete:n},t):this._queue.push(["userAppend",[e,t,n]])):(I.warn("calling userAppend failed due to invalid arguments"),m.isFunction(n)&&n({code:-1,msg:"invalid parameters"}))}}},{key:"userUniqAppend",value:function(e,t,n){if(!this._hasDisabled()){if(this._isObjectParams(e)){var i=e;e=i.properties,t=i.time,n=i.onComplete}F.userAppendProperties(e)||!this.config.strict?(t=m.isDate(t)?t:new Date,this._isReady()?this._sendRequest({type:"profile",eventName:"profile_uniq_append",properties:e,onComplete:n},t):this._queue.push(["userUniqAppend",[e,t,n]])):(I.warn("calling userAppend failed due to invalid arguments"),m.isFunction(n)&&n({code:-1,msg:"invalid parameters"}))}}},{key:"userUnset",value:function(e,t,n){var i=u({},e,null);if(!this._hasDisabled()){if(this._isObjectParams(i)){var r=i;i=r.properties,t=r.time,n=r.onComplete}F.propertiesMust(i)||!this.config.strict?(t=m.isDate(t)?t:new Date,this._isReady()?this._sendRequest({type:"profile",eventName:"profile_unset",properties:i,onComplete:n},t):this._queue.push(["userUnset",[i,t,n]])):(I.warn("calling userUnset failed due to invalid arguments"),m.isFunction(n)&&n({code:-1,msg:"invalid parameters"}))}}},{key:"uploadDeviceInfo",value:function(){var e=this;return new Promise((function(t,i){var r;$.getQuickDevice({success:(r=a(n().mark((function r(a){var s,o,c;return n().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s={os_name:"android",android_id:a.user,imei:a.device,oaid:a.device,mac:a.mac,android_version:a.system,api_version:a.osVersionCode,rom:a.vendorOsName,rom_version:a.vendorOsVersion,phone_brand:a.manufacturer,phone_model:a.model},o="".concat(g,"/user/device_info/?access_token=").concat(e.accessToken,"&client_id=").concat(e.appId),n.next=4,e.sendNetWork(o,{data:s});case 4:return c=n.sent,n.abrupt("return",0===c.code?t(c):i(c));case 6:case"end":return n.stop()}}),r)}))),function(e){return r.apply(this,arguments)})})}))}},{key:"logoutEvent",value:function(){this.track("$MPLogout",{})}},{key:"loginEvent",value:function(){this.track("$MPLogin",{})}},{key:"registerEvent",value:function(){"GravityEngine_quick_mp"!==H()?this.track("$MPRegister",{}):this.track("$AppRegister",{})}},{key:"payEvent",value:function(e,t,n,i,r){if("number"!=typeof e)throw new Error("pay_amount must be a number");if("string"!=typeof t)throw new Error("pay_type must be a string");if("string"!=typeof n)throw new Error("order_id must be a string");if("string"!=typeof i)throw new Error("pay_reason must be a string");if("string"!=typeof r)throw new Error("pay_method must be a string");this.track("$PayEvent",{$pay_amount:e,$pay_type:t,$order_id:n,$pay_reason:i,$pay_method:r})}},{key:"bindTAThirdPlatform",value:function(e,t){if(!e&&!t)throw new Error("taAccountId or taDistinctId must be required");if(e&&"string"!=typeof e)throw new Error("taAccountId must be a string");if(t&&"string"!=typeof t)throw new Error("taDistinctId must be a string");this.track("$BindThirdPlatform",{$third_platform_type:"ta",$ta_account_id:e,$ta_distinct_id:t})}},{key:"adShowEvent",value:function(e,t,n){if("string"!=typeof e)throw new Error("ad_type must be a string");if("string"!=typeof t)throw new Error("ad_unit_id must be a string");var i={$ad_type:e,$ad_unit_id:t,$adn_type:"wechat"};"[object Object]"===Object.prototype.toString.call(n)&&Object.assign(i,n),this.track("$AdShow",i)}},{key:"getQuery",value:function(){return $.getAppOptions().query||{}}},{key:"setQuery",value:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}},{key:"sendNetWork",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST";return new Promise((function(i,r){$.request({url:e,method:n,data:t,header:{"content-type":"application/json"},success:function(e){200!==e.statusCode?r(e):i(e.data)},fail:function(e){r(e)}})}))}},{key:"_errorPromise",value:function(e){return Promise.reject(new Error(e))}},{key:"register",value:(r=a(n().mark((function e(){var t,i,r=this,s=arguments;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:{},i="",this._state.initComplete?null!=t&&t.name?null!=t&&t.version||0===(null==t?void 0:t.version)?m.isNumber(null==t?void 0:t.version)&&"number"==typeof(null==t?void 0:t.version)||(i="version must be type: Number"):i="version must be required":i="name must be required":i="register must be called after init",!i){e.next=5;break}return e.abrupt("return",this._errorPromise(i));case 5:return e.abrupt("return",new Promise(function(){var e=a(n().mark((function e(i,a){var s,o,c,u,l,h,p,f,d,v,m,y,_,k;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.getQuery(),o=(null==t?void 0:t.channel)||"base_channel",c={client_id:r.appId,name:t.name,channel:o,version:t.version,wx_openid:(null==t?void 0:t.wx_openid)||"",wx_unionid:(null==t?void 0:t.wx_unionid)||"",ad_data:s},null!=s&&s.turbo_promoted_object_id&&(c.promoted_object_id=s.turbo_promoted_object_id),u="".concat(g,"/user/register/?access_token=").concat(r.accessToken),e.next=7,r.sendNetWork(u,c);case 7:if(0===(l=e.sent).code){e.next=10;break}return e.abrupt("return",a(l));case 10:return"GravityEngine_quick_mp"===H()&&r.uploadDeviceInfo(),r.registerEvent(),h=L.properties,p=new Date,f=p.getFullYear(),d=("0"+(p.getMonth()+1)).slice(-2),v=("0"+p.getDate()).slice(-2),m=("0"+p.getHours()).slice(-2),y=("0"+p.getMinutes()).slice(-2),_=("0"+p.getSeconds()).slice(-2),k="".concat(f,"-").concat(d,"-").concat(v," ").concat(m,":").concat(y,":").concat(_),r.userSetOnce({$channel:o,$manufacturer:h.$manufacturer,$model:h.$model,$brand:h.$brand,$os:h.$os,$first_visit_time:k}),e.abrupt("return",i(l));case 23:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"handleEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="";this._state.initComplete||(t="handleEvent must be called after init");var n={event_type:e.event_type};if(null!=e&&e.properties&&(n.properties=e.properties),n.use_client_time=(null==e?void 0:e.use_client_time)||!1,!n.use_client_time||null!=e&&e.timestamp||(t="timestamp must be required"),t)return this._errorPromise(t);null!=e&&e.timestamp&&(n.timestamp=e.timestamp),null!=e&&e.trace_id&&(n.trace_id=e.trace_id),n.timestamp=(null==e?void 0:e.timestamp)||(new Date).getTime();var i="".concat(g,"/event/handle_event/?access_token=").concat(this.accessToken,"&client_id=").concat(this.appId);return this.sendNetWork(i,n)}},{key:"queryUserInfo",value:(i=a(n().mark((function e(){var t=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._state.initComplete){e.next=2;break}return e.abrupt("return",this._errorPromise("queryUserInfo must be called after init"));case 2:return e.abrupt("return",new Promise(function(){var e=a(n().mark((function e(i,r){var a,s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(g,"/user/get/?access_token=").concat(t.accessToken,"&client_id=").concat(t.appId),e.next=3,t.sendNetWork(a,{},"GET");case 3:return s=e.sent,e.abrupt("return",0===s.code?i(s):r(s));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"authorizeOpenID",value:function(e){this.identify(e)}},{key:"identify",value:function(e){if(!this._hasDisabled()){if("number"==typeof e)e=String(e);else if("string"!=typeof e)return!1;this.store.setDistinctId(e)}}},{key:"getDistinctId",value:function(){return this.store.getDistinctId()}},{key:"login",value:function(e){if(!this._hasDisabled()){if("number"==typeof e)e=String(e);else if("string"!=typeof e)return!1;this.store.setAccountId(e)}}},{key:"reportBytedanceAdToGravity",value:(t=a(n().mark((function e(t,i,r){var a,s,o,c,u,l,p=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s="",t?i||(s="ad_unit_id must be required"):s="open_id must be required",!s){e.next=4;break}return e.abrupt("return",this._errorPromise(s));case 4:return o=m.formatDate(new Date).slice(0,13),c="".concat(g,"/event/dy/get_ecpm/?open_id=").concat(t,"&date_hour=").concat(o,"&access_token=").concat(this.accessToken),e.next=8,this.sendNetWork(c,{},"GET");case 8:if(null!=(u=e.sent)&&null!==(a=u.data)&&void 0!==a&&null!==(a=a.records)&&void 0!==a&&a.length){e.next=11;break}return e.abrupt("return");case 11:l=u.data.records.filter((function(e){return"send"===e.event_name})),$.getStorage("gravityengine_bytedance_ecpm_records_v2",!0,(function(e){var t,n=Array.isArray(e)?e:[],a=h(l.filter((function(e){return!n.includes(e.id)})));try{for(a.s();!(t=a.n()).done;){var s=t.value.cost/1e5*1e3;s%1!=0&&(s=+s.toFixed(2));var o={$ecpm:s,$ad_type:"reward",$ad_unit_id:i,$adn_type:"bytedance"};"[object Object]"===Object.prototype.toString.call(r)&&Object.assign(o,r),p.track("$AdShow",o)}}catch(e){a.e(e)}finally{a.f()}var c=l.map((function(e){return e.id}));$.setStorage("gravityengine_bytedance_ecpm_records_v2",JSON.stringify(c))}));case 13:case"end":return e.stop()}}),e,this)}))),function(e,n,i){return t.apply(this,arguments)})},{key:"getAccountId",value:function(){return this.store.getAccountId()}},{key:"logout",value:function(){this._hasDisabled()||this.store.setAccountId(null)}},{key:"setSuperProperties",value:function(e){this._hasDisabled()||(F.propertiesMust(e)||!this.config.strict?this.store.setSuperProperties(e):I.warn("setSuperProperties parameter must be a valid property value"))}},{key:"registerApp",value:function(e){this.setSuperProperties(e)}},{key:"clearSuperProperties",value:function(){this._hasDisabled()||this.store.setSuperProperties({},!0)}},{key:"unsetSuperProperty",value:function(e){if(!this._hasDisabled()&&m.isString(e)){var t=this.getSuperProperties();delete t[e],this.store.setSuperProperties(t,!0)}}},{key:"getSuperProperties",value:function(){return this.store.getSuperProperties()}},{key:"getSendProperties",value:function(){try{return m.extend({},L.properties,this.autoTrackProperties,this.store.getSuperProperties(),this.dynamicProperties?this.dynamicProperties():{})}catch(e){return{}}}},{key:"getPresetProperties",value:function(){var e=L.properties,t={},n=e.$system_language;t.system_language=m.isUndefined(n)?"":n;var i=e.$os;t.os=m.isUndefined(i)?"":i;var r=e.$screen_width;t.screenWidth=m.isUndefined(r)?0:r;var a=e.$screen_height;t.screenHeight=m.isUndefined(a)?0:a;var s=e.$network_type;t.networkType=m.isUndefined(s)?"":s;var o=e.$model;t.deviceModel=m.isUndefined(o)?"":o;var c=e.$os_version;t.osVersion=m.isUndefined(c)?"":c,t.deviceId=this.getDeviceId();var u=0-(new Date).getTimezoneOffset()/60;t.zoneOffset=u;var l=e.$manufacturer;t.manufacturer=m.isUndefined(l)?"":l;var h=e.$manufacturer;return t.brand=m.isUndefined(h)?"":h,t.toEventPresetProperties=function(){return{$app_id:this.appId,$model:t.deviceModel,$screen_width:t.screenWidth,$screen_height:t.screenHeight,$system_language:t.system_language,$os:t.os,$os_version:t.osVersion,$network_type:t.networkType,$manufacturer:t.manufacturer,$brand:t.manufacturer}},t}},{key:"setDynamicSuperProperties",value:function(e){this._hasDisabled()||("function"==typeof e?F.properties(e())||!this.config.strict?this.dynamicProperties=e:I.warn("A dynamic public property must return a valid property value"):I.warn("setDynamicSuperProperties parameter must be a function type"))}},{key:"timeEvent",value:function(e,t){this._hasDisabled()||(t=m.isDate(t)?t:new Date,this._isReady()?F.event(e)||!this.config.strict?this.store.setEventTimer(e,t.getTime()):I.warn("calling timeEvent failed due to invalid eventName: "+e):this._queue.push(["timeEvent",[e,t]]))}},{key:"getDeviceId",value:function(){return L.properties.$device_id}},{key:"enableTracking",value:function(e){this.enabled=e,this.store._set("ta_enabled",e)}},{key:"optOutTracking",value:function(){this.store.setSuperProperties({},!0),this.store.setDistinctId(m.UUID()),this.store.setAccountId(null),this._queue.splice(0,this._queue.length),this.isOptOut=!0,this.store._set("ge_isOptOut",!0)}},{key:"optOutTrackingAndDeleteUser",value:function(){var e=new Date;this._sendRequest({type:"user_del"},e),this.optOutTracking()}},{key:"optInTracking",value:function(){this.isOptOut=!1,this.store._set("ge_isOptOut",!1)}},{key:"setTrackStatus",value:function(e){switch(e){case"PAUSE":this.eventSaveOnly=!1,this.optInTracking(),this.enableTracking(!1);break;case"STOP":this.eventSaveOnly=!1,this.optOutTracking(!0);break;case"SAVE_ONLY":case"NORMAL":default:this.eventSaveOnly=!1,this.optInTracking(),this.enableTracking(!0)}}}]),e}(),W={name:"GravityEngine",enableLog:!0,enableNative:!1},z=function(){function e(t){s(this,e),t.appId=m.checkAppId(t.clientId),t.accessToken=t.accessToken,t.appId?t.accessToken||console.warn("GravityAnalytics: accessToken must be required"):console.warn("GravityAnalytics: clientId must be required"),t.serverUrl="".concat(g,"/event/collect/?access_token=").concat(t.accessToken);var n=m.extend({},W);m.isObject(t)?this.config=m.extend(n,t):this.config=n,this._init(this.config)}return c(e,[{key:"_isNativePlatform",value:function(){return!(m.isUndefined(this.nativeProxy)||!this._isIOS()&&!this._isAndroid()||!this.config.enableNative)}},{key:"_isIOS",value:function(){return"Conch-ios"===conchConfig.getOS()}},{key:"_isAndroid",value:function(){return"Conch-android"===conchConfig.getOS()}},{key:"_init",value:function(e){this.name=e.name,this.appId=e.clientId,this.accessToken=e.accessToken;var t=e.serverUrl||e.server_url;this.serverUrl=t,this.serverDebugUrl=t+"/data_debug",this.configUrl=t+"/config";try{this._isIOS()?this.nativeProxy=PlatformClass.createClass("LayaProxyApi"):this._isAndroid()&&(this.nativeProxy=PlatformClass.createClass("demo.LayaProxyApi"))}catch(e){}finally{this._isNativePlatform()?(this.initInstanceForNative(this.name,e,this.appId),this._readStorage(e)):this.geJs=new GravityAnalyticsAPIForJS(e)}}},{key:"_readStorage",value:function(e){var t=this,n=e.persistenceName,i=e.persistenceNameOld;e.isChildInstance&&(n=e.persistenceName+"_"+e.name,i=e.persistenceNameOld+"_"+e.name),this._state=$.getStorage(n)||{},m.isEmptyObject(this._state)&&(this._state=$.getStorage(i)||{}),m.isEmptyObject(this._state)?$.getStorage(n,!0,(function(e){m.isEmptyObject(e)?$.getStorage(i,!0,(function(e){t._state=m.extend2Layers({},e,t._state)})):t._state=m.extend2Layers({},e,t._state),t._state.distinct_id&&t.identifyForNative(t._state.distinct_id),t._state.account_id&&t.loginForNative(t._state.account_id)})):(this._state.distinct_id&&this.identifyForNative(this._state.distinct_id),this._state.account_id&&this.loginForNative(this._state.account_id))}},{key:"initInstance",value:function(e,t){return this._isNativePlatform()?(m.isUndefined(t)?this[e]=new GravityAnalyticsAPI(this.config):this[e]=new GravityAnalyticsAPI(t),this[e]):(this[e]=this.geJs.initInstance(e,t),this[e])}},{key:"lightInstance",value:function(e){return this[e]}},{key:"init",value:function(){if(this._isNativePlatform()){var e=window,t=this;return e.__autoTrackCallback=function(e){if(m.isFunction(t.config.autoTrack.callback)){var n=t.config.autoTrack.callback(e);return JSON.stringify(n)}return"{}"},void this.startGravityAnalyticsForNative()}this.geJs.init()}},{key:"track",value:function(e,t,n,i){this._isNativePlatform()?this.trackForNative(e,t,n,this.appId):this.geJs.track(e,t,n,i)}},{key:"register",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this._isNativePlatform())return this.geJs.register(e)}},{key:"handleEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this._isNativePlatform())return this.geJs.handleEvent(e)}},{key:"queryUserInfo",value:function(){if(!this._isNativePlatform())return this.geJs.queryUserInfo()}},{key:"registerApp",value:function(e){if(!this._isNativePlatform())return this.geJs.registerApp(e)}},{key:"registerEvent",value:function(){if(!this._isNativePlatform())return this.geJs.registerEvent()}},{key:"loginEvent",value:function(){if(!this._isNativePlatform())return this.geJs.loginEvent()}},{key:"logoutEvent",value:function(){if(!this._isNativePlatform())return this.geJs.logoutEvent()}},{key:"payEvent",value:function(e,t,n,i,r){if(!this._isNativePlatform())return this.geJs.payEvent(e,t,n,i,r)}},{key:"adShowEvent",value:function(e,t,n){if(!this._isNativePlatform())return this.geJs.adShowEvent(e,t,n)}},{key:"reportBytedanceAdToGravity",value:function(e,t,n){if(!this._isNativePlatform())return this.geJs.reportBytedanceAdToGravity(e,t,n)}},{key:"userSet",value:function(e,t,n){this._isNativePlatform()?this.userSetForNative(e,this.appId):this.geJs.userSet(e,t,n)}},{key:"userSetOnce",value:function(e,t,n){this._isNativePlatform()?this.userSetOnceForNative(e,this.appId):this.geJs.userSetOnce(e,t,n)}},{key:"userUnset",value:function(e,t,n){this._isNativePlatform()?this.userUnsetForNative(e,this.appId):this.geJs.userUnset(e,t,n)}},{key:"userDel",value:function(e,t){this._isNativePlatform()?this.userDelForNative(this.appId):this.geJs.userDel(e,t)}},{key:"userAdd",value:function(e,t,n){this._isNativePlatform()?this.userAddForNative(e,this.appId):this.geJs.userAdd(e,t,n)}},{key:"userNumberMax",value:function(e,t,n){this._isNativePlatform()||this.geJs.userNumberMax(e,t,n)}},{key:"userNumberMin",value:function(e,t,n){this._isNativePlatform()||this.geJs.userNumberMin(e,t,n)}},{key:"userAppend",value:function(e,t,n){this._isNativePlatform()?this.userAppendForNative(e,this.appId):this.geJs.userAppend(e,t,n)}},{key:"userUniqAppend",value:function(e,t,n){this._isNativePlatform()?this.userUniqAppendForNative(e,this.appId):this.geJs.userUniqAppend(e,t,n)}},{key:"authorizeOpenID",value:function(e){this.identify(e)}},{key:"identify",value:function(e){this._isNativePlatform()?this.identifyForNative(e,this.appId):this.geJs.identify(e)}},{key:"getDistinctId",value:function(e){if(!m.isUndefined(e)){if(this._isNativePlatform())return void this.getDistinctIdForNative(e,this.appId);e(this.geJs.getDistinctId())}return this.geJs.getDistinctId()}},{key:"login",value:function(e){this._isNativePlatform()?this.loginForNative(e,this.appId):this.geJs.login(e)}},{key:"getAccountId",value:function(e){if(!m.isUndefined(e)){if(this._isNativePlatform())return void this.getAccountIdForNative(e,this.appId);e(this.geJs.getAccountId())}return this.geJs.getAccountId()}},{key:"logout",value:function(){this._isNativePlatform()?this.logoutForNative(this.appId):this.geJs.logout()}},{key:"setSuperProperties",value:function(e){this._isNativePlatform()?this.setSuperPropertiesForNative(e,this.appId):this.geJs.setSuperProperties(e)}},{key:"clearSuperProperties",value:function(){this._isNativePlatform()?this.clearSuperPropertiesForNative(this.appId):this.geJs.clearSuperProperties()}},{key:"unsetSuperProperty",value:function(e){this._isNativePlatform()?this.unsetSuperPropertyForNative(e,this.appId):this.geJs.unsetSuperProperty(e)}},{key:"getSuperProperties",value:function(e){if(!m.isUndefined(e)){if(this._isNativePlatform())return void this.getSuperPropertiesForNative(e,this.appId);e(this.geJs.getSuperProperties())}return this.geJs.getSuperProperties()}},{key:"getPresetProperties",value:function(e){if(!m.isUndefined(e)){if(this._isNativePlatform())return void this.getPresetPropertiesForNative(e,this.appId);e(this.geJs.getPresetProperties())}return this.geJs.getPresetProperties()}},{key:"setDynamicSuperProperties",value:function(e){this._isNativePlatform()?"function"==typeof e?this.dynamicProperties=e:I.warn("setDynamicSuperProperties parameter must be a function type"):this.geJs.setDynamicSuperProperties(e)}},{key:"timeEvent",value:function(e,t){return this._isNativePlatform()?this.timeEventForNative(e,this.appId):this.geJs.timeEvent(e,t)}},{key:"getDeviceId",value:function(e){if(!m.isUndefined(e)){if(this._isNativePlatform())return void this.getDeviceIdForNative(e,this.appId);e(this.geJs.getDeviceId())}return this.geJs.getDeviceId()}},{key:"enableTracking",value:function(e){this._isNativePlatform()?this.enableTrackingForNative(e,this.appId):this.geJs.enableTracking(e)}},{key:"optOutTracking",value:function(){this._isNativePlatform()?this.optOutTrackingForNative(this.appId):this.geJs.optOutTracking()}},{key:"optOutTrackingAndDeleteUser",value:function(){this._isNativePlatform()?this.optOutTrackingAndDeleteUserForNative(this.appId):this.geJs.optOutTrackingAndDeleteUser()}},{key:"optInTracking",value:function(){this._isNativePlatform()?this.optInTrackingForNative(this.appId):this.geJs.optInTracking()}},{key:"setTrackStatus",value:function(e){this._isNativePlatform()?this.setTrackStatusForNative(e,this.appId):this.geJs.setTrackStatus(e)}},{key:"trackForNative",value:function(e,t,n,i){var r=m.isDate(n)?m.formatDate(n):"";e=m.isUndefined(e)?"":e,t=m.isUndefined(t)?{}:t,r=m.isUndefined(r)?"":r,i=m.isUndefined(i)?"":i;var a=m.extend(t,this.dynamicProperties?this.dynamicProperties():{});a=m.encodeDates(a),this._isIOS()?this.nativeProxy.call("track:properties:time:appId:",e,JSON.stringify(a),r,i):this._isAndroid()&&this.nativeProxy.call("track",e,JSON.stringify(a),r,i)}},{key:"timeEventForNative",value:function(e,t){e=m.isUndefined(e)?"":e,t=m.isUndefined(t)?"":t,this._isIOS()?this.nativeProxy.call("timeEvent:appId:",e,t):this._isAndroid()&&this.nativeProxy.call("timeEvent",e,t)}},{key:"loginForNative",value:function(e,t){e=m.isUndefined(e)?"":e,t=m.isUndefined(t)?"":t,this._isIOS()?this.nativeProxy.call("login:appId:",e,t):this._isAndroid()&&this.nativeProxy.call("login",e,t)}},{key:"logoutForNative",value:function(e){e=m.isUndefined(e)?"":e,this._isIOS()?this.nativeProxy.call("logout:",e):this._isAndroid()&&this.nativeProxy.call("logout",e)}},{key:"setSuperPropertiesForNative",value:function(e,t){e=m.isUndefined(e)?{}:e,t=m.isUndefined(t)?"":t,e=m.encodeDates(e),this._isIOS()?this.nativeProxy.call("setSuperProperties:appId:",JSON.stringify(e),t):this._isAndroid()&&this.nativeProxy.call("setSuperProperties",JSON.stringify(e),t)}},{key:"getSuperPropertiesForNative",value:function(e,t){t=m.isUndefined(t)?"":t,this._isIOS()?this.nativeProxy.callWithBack((function(t){e(JSON.parse(t))}),"getSuperProperties:",t):this._isAndroid()&&this.nativeProxy.callWithBack((function(t){e(JSON.parse(t))}),"getSuperProperties",t)}},{key:"unsetSuperPropertyForNative",value:function(e,t){e=m.isUndefined(e)?"":e,t=m.isUndefined(t)?"":t,this._isIOS()?this.nativeProxy.call("unsetSuperProperty:appId:",e,t):this._isAndroid()&&this.nativeProxy.call("unsetSuperProperty",e,t)}},{key:"clearSuperPropertiesForNative",value:function(e){e=m.isUndefined(e)?"":e,this._isIOS()?this.nativeProxy.call("clearSuperProperties:",e):this._isAndroid()&&this.nativeProxy.call("clearSuperProperties",e)}},{key:"userSetForNative",value:function(e,t){e=m.isUndefined(e)?{}:e,t=m.isUndefined(t)?"":t,e=m.encodeDates(e),this._isIOS()?this.nativeProxy.call("userSet:appId:",JSON.stringify(e),t):this._isAndroid()&&this.nativeProxy.call("userSet",JSON.stringify(e),t)}},{key:"userSetOnceForNative",value:function(e,t){e=m.isUndefined(e)?{}:e,t=m.isUndefined(t)?"":t,e=m.encodeDates(e),this._isIOS()?this.nativeProxy.call("userSetOnce:appId:",JSON.stringify(e),t):this._isAndroid()&&this.nativeProxy.call("userSetOnce",JSON.stringify(e),t)}},{key:"userAppendForNative",value:function(e,t){e=m.isUndefined(e)?{}:e,t=m.isUndefined(t)?"":t,e=m.encodeDates(e),this._isIOS()?this.nativeProxy.call("userAppend:appId:",JSON.stringify(e),t):this._isAndroid()&&this.nativeProxy.call("userAppend",JSON.stringify(e),t)}},{key:"userUniqAppendForNative",value:function(e,t){e=m.isUndefined(e)?{}:e,t=m.isUndefined(t)?"":t,e=m.encodeDates(e),this._isIOS()?this.nativeProxy.call("userUniqAppend:appId:",JSON.stringify(e),t):this._isAndroid()&&this.nativeProxy.call("userUniqAppend",JSON.stringify(e),t)}},{key:"userAddForNative",value:function(e,t){e=m.isUndefined(e)?{}:e,t=m.isUndefined(t)?"":t,e=m.encodeDates(e),this._isIOS()?this.nativeProxy.call("userAdd:appId:",JSON.stringify(e),t):this._isAndroid()&&this.nativeProxy.call("userAdd",JSON.stringify(e),t)}},{key:"userUnsetForNative",value:function(e,t){e=m.isUndefined(e)?"":e,t=m.isUndefined(t)?"":t,this._isIOS()?this.nativeProxy.call("userUnset:appId:",e,t):this._isAndroid()&&this.nativeProxy.call("userUnset",e,t)}},{key:"userDelForNative",value:function(e){e=m.isUndefined(e)?"":e,this._isIOS()?this.nativeProxy.call("userDel:",e):this._isAndroid()&&this.nativeProxy.call("userDel",e)}},{key:"authorizeOpenIDForNative",value:function(e,t){this.identifyForNative(e,t)}},{key:"identifyForNative",value:function(e,t){e=m.isUndefined(e)?"":e,t=m.isUndefined(t)?"":t,this._isIOS()?this.nativeProxy.call("identify:appId:",e,t):this._isAndroid()&&this.nativeProxy.call("identify",e,t)}},{key:"initInstanceForNative",value:function(e,t,n){e=m.isUndefined(e)?"":e,t=m.isUndefined(t)?{}:t,n=m.isUndefined(n)?"":n,this._isIOS()?(this.nativeProxy.call("setCustomerLibInfoWithLibName:libVersion:",d,f),m.isUndefined(t)?this.nativeProxy.call("initInstance:appId:",e,n):this.nativeProxy.call("initInstance:config:",e,JSON.stringify(t))):this._isAndroid()&&(this.nativeProxy.call("setCustomerLibInfo",d,f),m.isUndefined(t)?this.nativeProxy.call("initInstanceAppId",e,n):this.nativeProxy.call("initInstanceConfig",e,JSON.stringify(t)))}},{key:"lightInstanceForNative",value:function(e,t,n){e=m.isUndefined(e)?"":e,t=m.isUndefined(t)?"":t,this._isIOS()?this.nativeProxy.callWithBack((function(e){n(e)}),"lightInstance:appId:",e,t):this._isAndroid()&&this.nativeProxy.callWithBack((function(e){n(e)}),"lightInstance",e,t)}},{key:"startGravityAnalyticsForNative",value:function(e){e=m.isUndefined(e)?"":e,this._isIOS()?this.nativeProxy.call("startGravityAnalytics:",e):this._isAndroid()&&this.nativeProxy.call("startGravityAnalytics",e)}},{key:"getDeviceIdForNative",value:function(e,t){t=m.isUndefined(t)?"":t,this._isIOS()?this.nativeProxy.callWithBack((function(t){e(t)}),"getDeviceId:",t):this._isAndroid()&&this.nativeProxy.callWithBack((function(t){e(t)}),"getDeviceId",t)}},{key:"getDistinctIdForNative",value:function(e,t){t=m.isUndefined(t)?"":t,this._isIOS()?this.nativeProxy.callWithBack((function(t){e(t)}),"getDistinctId:",t):this._isAndroid()&&this.nativeProxy.callWithBack((function(t){e(t)}),"getDistinctId",t)}},{key:"getAccountIdForNative",value:function(e,t){t=m.isUndefined(t)?"":t,this._isIOS()?this.nativeProxy.callWithBack((function(t){e(t)}),"getAccountId:",t):this._isAndroid()&&this.nativeProxy.callWithBack((function(t){e(t)}),"getAccountId",t)}},{key:"getPresetPropertiesForNative",value:function(e,t){function n(t){var n=JSON.parse(t),i={},r=n.$system_language;i.system_language=m.isUndefined(r)?"":r;var a=n.$os;i.os=m.isUndefined(a)?"":a;var s=n.$screen_width;i.screenWidth=m.isUndefined(s)?0:s;var o=n.$screen_height;i.screenHeight=m.isUndefined(o)?0:o;var c=n.$network_type;i.networkType=m.isUndefined(c)?"":c;var u=n.$device_model;i.deviceModel=m.isUndefined(u)?"":u;var l=n.$os_version;i.osVersion=m.isUndefined(l)?"":l;var h=n.$device_id;i.deviceId=m.isUndefined(h)?"":h;var p=n.$zone_offset;i.zoneOffset=m.isUndefined(p)?"":p;var f=n.$manufacturer;i.manufacturer=m.isUndefined(f)?"":f;var d=n.$manufacturer;i.brand=m.isUndefined(d)?"":d,i.toEventPresetProperties=function(){return{$device_model:i.deviceModel,$device_id:i.deviceId,$screen_width:i.screenWidth,$screen_height:i.screenHeight,$system_language:i.system_language,$os:i.os,$os_version:i.osVersion,$network_type:i.networkType,$zone_offset:i.zoneOffset,$manufacturer:i.manufacturer,$brand:i.manufacturer}},e(i)}t=m.isUndefined(t)?"":t,this._isIOS()?this.nativeProxy.callWithBack(n,"getPresetProperties:",t):this._isAndroid()&&this.nativeProxy.callWithBack(n,"getPresetProperties",t)}},{key:"enableTrackingForNative",value:function(e,t){e=!m.isUndefined(e)&&e,t=m.isUndefined(t)?"":t,this._isIOS()?this.nativeProxy.call("enableTracking:appId:",e.toString(),t):this._isAndroid()&&this.nativeProxy.call("enableTracking",e.toString(),t)}},{key:"optOutTrackingForNative",value:function(e){e=m.isUndefined(e)?"":e,this._isIOS()?this.nativeProxy.call("optOutTracking:",e):this._isAndroid()&&this.nativeProxy.call("optOutTracking",e)}},{key:"optOutTrackingAndDeleteUserForNative",value:function(e){e=m.isUndefined(e)?"":e,this._isIOS()?this.nativeProxy.call("optOutTrackingAndDeleteUser:",e):this._isAndroid()&&this.nativeProxy.call("optOutTrackingAndDeleteUser",e)}},{key:"optInTrackingForNative",value:function(e){e=m.isUndefined(e)?"":e,this._isIOS()?this.nativeProxy.call("optInTracking:",e):this._isAndroid()&&this.nativeProxy.call("optInTracking",e)}},{key:"setTrackStatusForNative",value:function(e,t){t=m.isUndefined(t)?"":t,this._isIOS()?this.nativeProxy.call("setTrackStatus:appId:",e,t):this._isAndroid()&&this.nativeProxy.call("setTrackStatus",e,t)}}]),e}();window.GravityAnalyticsAPI=z,window.GravityAnalyticsAPIForJS=B,module.exports=z;
